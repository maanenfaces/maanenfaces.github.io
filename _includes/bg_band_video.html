<style>
  .site-bg-video-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1000;
    overflow: hidden;
    background: #000;
  }

  .site-bg-glitch {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/img/bg-darkwall.png');
    z-index: -990;
    transition: opacity 1.5s ease;
  }

  #site-bg-yt-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -995;
    pointer-events: none;
  }

  #site-bg-yt-player {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100vw;
    height: 56.25vw;
    min-height: 100vh;
    min-width: 177.77vh;
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 0;
    transition: opacity 2.5s ease-in-out;
  }

  @media (max-width: 1199.98px) {
    #site-bg-yt-wrapper {
      min-height: 80% !important;
      min-width: unset !important;
      top: 50%;
      transform: translate(-50%, -60%) !important;
    }
  }

  @media (max-width: 575.98px) {
    #site-bg-yt-wrapper {
      min-height: 100% !important;
      min-width: unset !important;
      top: 50%;
      transform: translate(-30%, -50%) !important;
    }
  }

  .site-bg-active #site-bg-yt-player { opacity: 1; }
  .site-bg-active #site-bg-placeholder { opacity: 0; }
</style>

<div class="site-bg-video-container">
  <div id="site-bg-placeholder" class="site-bg-glitch"></div>

  <div id="site-bg-yt-wrapper">
    <div id="site-bg-yt-player"></div>
  </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
  const SITE_BG_VIDEO_ID = 'UZaZJ3_Emlg';
  let siteBackgroundPlayer;

  function initializeSiteBackgroundVideo() {
    siteBackgroundPlayer = new YT.Player('site-bg-yt-player', {
      videoId: SITE_BG_VIDEO_ID,
      playerVars: {
        'autoplay': 1,
        'controls': 0,        // Pas de boutons
        'rel': 0,             // Pas de suggestions
        'mute': 1,            // Muet obligatoire pour l'autoplay
        'loop': 1,            // Boucle
        'playlist': SITE_BG_VIDEO_ID, // Requis pour le loop
        'modestbranding': 1,  // Moins de logo YouTube
        'iv_load_policy': 3,  // Pas d'annotations
        'disablekb': 1,       // DÃ©sactive le clavier
        'playsinline': 1,
        'start': 53
      },
      events: {
        'onReady': (event) => {
          event.target.mute();
          event.target.playVideo();
        },
        'onStateChange': (event) => {
          if (event.data === YT.PlayerState.PLAYING) {
            document.querySelector('.site-bg-video-container').classList.add('site-bg-active');
          }
        }
      }
    });
  }

  function onYouTubeIframeAPIReady() {
    setTimeout(initializeSiteBackgroundVideo, 500);
  }
</script>
